<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>NHANES GT3X File Format by actigraph</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>NHANES GT3X File Format</h1>
        <p>Documentation and sample library for parsing ActiGraph .gt3x files for NHANES </p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/actigraph/NHANES-GT3X-File-Format" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/actigraph/NHANES-GT3X-File-Format/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/actigraph/NHANES-GT3X-File-Format/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>
<a name="actigraph-nhanes-gt3x-file-format" class="anchor" href="#actigraph-nhanes-gt3x-file-format"><span class="octicon octicon-link"></span></a>ActiGraph NHANES .gt3x File Format</h1>

<p><strong>Prepared By:</strong></p>

<ul>
<li>
<a href="https://github.com/dwjref" title="Daniel's GitHub Profile">Daniel Judge</a> - Software Engineer</li>
<li>
<a href="https://github.com/jmaygarden" title="Judge's GitHub Profile">Judge Maygarden</a> - Hardware/Firmware Engineer</li>
</ul><p><strong>Last Update:</strong> 2014-07-17</p>

<h2>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>This documentation and sample library provide information on getting activity data out of <a href="http://www.actigraphcorp.com/" title="ActiGraph site">ActiGraph</a> .gt3x files that were used in the <a href="http://www.cdc.gov/nchs/nhanes.htm">NHANES</a> project. </p>

<h2>
<a name="valid-gt3x-files" class="anchor" href="#valid-gt3x-files"><span class="octicon octicon-link"></span></a>Valid .gt3x Files</h2>

<p>This documentation and library are valid for .gt3x files downloaded from GT3X+ devices with serial numbers that start with "NEO" or ActiSleep+ devices with serial numbers that start with "MRA." The devices must have a firmware version of 2.5.0 or earlier. Files that don't fall under these conditions have a different format and are not parsable using the sample library. </p>

<h2>
<a name="file-format" class="anchor" href="#file-format"><span class="octicon octicon-link"></span></a>File Format</h2>

<p>The .gt3x file is a zip archive contains several files needed to parse activity data. Click on a file for detailed information.</p>

<table>
<tr>
<th>FileName</th>
    <th>Description</th>
    <th>Size</th>
    <th>Used in Parsing?</th>
  </tr>
<tr>
<td><a href="fileformats/activity.bin.md">activity.bin</a></td>
    <td>Binary Activity Data Log</td>
    <td>Up to 237.5 MB</td>
    <td>Yes</td>
  </tr>
<tr>
<td>battery.bin</td>
    <td>Binary Battery Data Log</td>
    <td>Up to 256 kB</td>
    <td>No</td>
  </tr>
<tr>
<td>eeprom.bin</td>
    <td>EEPROM device contents</td>
    <td>2 kB</td>
    <td>No</td>
  </tr>
<tr>
<td>firmware.bin</td>
    <td>Firmware Update Storage</td>
    <td>128 kB</td>
    <td>No</td>
  </tr>
<tr>
<td>gt3xplus.ico</td>
    <td>Windows Drive Icon</td>
    <td>9,662 bytes</td>
    <td>No</td>
  </tr>
<tr>
<td><a href="fileformats/info.txt.md">info.txt</a></td>
    <td>Device information including start date and download date.</td>
    <td>No limit (usually less than 1 kB)</td>
    <td>Yes</td>
  </tr>
<tr>
<td>log.txt</td>
    <td>Firmware Diagnostics Log</td>
    <td>Up to 128 kB</td>
    <td>No</td>
  </tr>
<tr>
<td><a href="fileformats/lux.bin.md">lux.bin</a></td>
    <td>Binary Lux Data Log</td>
    <td>Up to 3.5 MB</td>
    <td>Yes</td>
  </tr>
<tr>
<td>metadata</td>
    <td>Subject Biometric Data</td>
    <td>128 kB</td>
    <td>No</td>
  </tr>
<tr>
<td>ram.bin</td>
    <td>Microcontroller RAM contents</td>
    <td>Up to 128 kB</td>
    <td>No</td>
  </tr>
</table><p><a href="technical.md">Technical information</a> is also available.</p>

<h2>
<a name="steps-to-parse-activity-and-light-data-from-a-gt3x-file" class="anchor" href="#steps-to-parse-activity-and-light-data-from-a-gt3x-file"><span class="octicon octicon-link"></span></a>Steps to Parse Activity and Light Data from a .gt3x File</h2>

<ol>
<li>Verify .gt3x file is a zip file</li>
<li>Verify .gt3x file has activity.bin file</li>
<li>Verify .gt3x file has info.txt file</li>
<li>Verify .gt3x file has lux.bin file</li>
<li>Extract activity.bin, info.txt and lux.bin files</li>
<li>Verify the serial number in the info.txt file starts with either "NEO" or "MRA"</li>
<li>Parse and save the sample rate from the info.txt file (it's stored in Hz)</li>
<li>Parse and save the start date from the info.txt file (it's stored in <a href="technical.md">.NET Ticks</a>)</li>
<li>Optional: calculate total number of samples by multiplying the file size (in bytes) of the activity.bin file by 8 (bits per byte) and then dividing by 36 (bits per sample).</li>
<li>Open a stream connection to the extracted activity.bin file from #5 and <a href="fileformats/activity.bin.md">parse the activity data</a>.</li>
<li>Optional: Open a stream connection to the extracted lux.bin file from #5 and <a href="fileformats/lux.bin.md">parse the light data</a>.</li>
</ol><h2>
<a name="source-code-example" class="anchor" href="#source-code-example"><span class="octicon octicon-link"></span></a>Source Code Example</h2>

<p>We've included a <a href="/src/GT3X.Parsing.Library">sample C# library</a> showing how to parse a .gt3x file. In addition, we've added a <a href="/src/GT3X.Parsing.Examples">UI tool</a> that lets you select a .gt3x file and export activity and lux data into CSV or JSON formats.</p>

<h2>
<a name="testing-tool" class="anchor" href="#testing-tool"><span class="octicon octicon-link"></span></a>Testing Tool</h2>

<p>The project also includes a .NET 4.0 GUI application built on the GT3X.Parsing.Library that provides a quick way to load .gt3x files and export activity and lux data to CSV or JSON format.</p>

<p>Pre-built releases are found in the <a href="https://github.com/actigraph/NHANES-GT3X-File-Format/releases">release section of this repository</a>. </p>

<p><img src="https://cloud.githubusercontent.com/assets/1696540/3758819/d9b35a1a-1850-11e4-8c8f-3c13022775c8.png" alt=""></p>

<h2>
<a name="tools-used-to-prepare-documentation-and-library" class="anchor" href="#tools-used-to-prepare-documentation-and-library"><span class="octicon octicon-link"></span></a>Tools Used to Prepare Documentation and Library</h2>

<ul>
<li>
<a href="http://markdownpad.com/" title="MarkdownPad site">MarkdownPad</a> for documentation</li>
<li>
<a href="http://www.linqpad.net/" title="Linqpad site">LinqPad</a> for quick C# parsing</li>
<li>
<a href="https://github.com/xunit/xunit" title="xunit site">xUnit.net</a> for unit tests</li>
<li>
<a href="https://github.com/haf/DotNetZip.Semverd/" title="dotnetzip site">DotNetZip</a> for easy .NET zip file parsing</li>
<li>
<a href="http://www.visualstudio.com/" title="visual studio site">Visual Studio</a> for library creation and testing </li>
<li>
<a href="http://www.jetbrains.com/resharper/" title="resharper site">ReSharper</a> for improved productivity in Visual Studio and unit test runner.</li>
<li>
<a href="http://james.newtonking.com/json" title="json dot net site">Json.NET</a> for amazing JSON usability in .NET.</li>
<li>
<a href="https://github.com/JoshClose/CsvHelper" title="csv helper site">CsvHelper</a> to help write CSV files quickly.</li>
</ul>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/actigraph">actigraph</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>